{"is_source_file": true, "format": "Python", "description": "This file defines classes and functions for managing conversations, generating notes from conversation data, and interacting with OneDrive storage within a Django-based healthcare application. It includes data classes for conversation management, heuristics for note generation, and a minimal client for uploading files to OneDrive.", "external_files": ["django.utils", "requests", ".models"], "external_methods": ["Conversation.objects.create", "Conversation.objects.get", "Message.objects.create", "Conversation.messages.all", "timezone.now"], "published": ["ConversationManager", "NoteGenerator", "OneDriveClient", "OneDriveError"], "classes": [{"name": "ConversationManager", "description": "Manages conversation creation, message appending, and retrieval."}, {"name": "NoteGenerator", "description": "Generates structured disease notes from conversation messages using simple heuristics."}, {"name": "OneDriveClient", "description": "Provides methods to save files to OneDrive via Microsoft Graph API."}, {"name": "OneDriveError", "description": "Custom exception for OneDrive-related errors."}], "methods": [{"name": "Conversation start_conversation(self, patient_id: str, metadata: dict | None = None)", "description": "Creates and returns a new Conversation instance for a patient.", "scope": "ConversationManager", "scopeKind": "class"}, {"name": "Conversation append_messages(self, conversation_id: uuid.UUID, messages: List[Tuple[str, str]])", "description": "Adds a list of messages to an existing conversation and updates its timestamp.", "scope": "ConversationManager", "scopeKind": "class"}, {"name": "Conversation get_conversation(self, conversation_id: uuid.UUID)", "description": "Retrieves a Conversation instance by its ID.", "scope": "ConversationManager", "scopeKind": "class"}, {"name": "Tuple[str,str] generate_note(self, conversation: Conversation, note_title: str = \"\")", "description": "Generates a disease note from conversation messages using simple heuristics.", "scope": "NoteGenerator", "scopeKind": "class"}, {"name": "dict save_text_file(self, folder_path: str, filename: str, content: str)", "description": "Uploads a text file to a specified folder in OneDrive.", "scope": "OneDriveClient", "scopeKind": "class"}, {"name": "str _get_access_token(self)", "description": "Retrieves an access token for Microsoft Graph API using current configuration.", "scope": "OneDriveClient", "scopeKind": "class"}, {"name": "None __init__(self)", "scope": "OneDriveClient", "scopeKind": "class", "description": "unavailable"}], "calls": ["Conversation.objects.create", "Conversation.objects.get", "Message.objects.create", "Conversation.messages.all", "timezone.now", "requests.put", "requests.post", "resp.json", "resp.status_code"], "search-terms": ["ConversationManager", "NoteGenerator", "OneDriveClient", "generate_note", "save_text_file", "Microsoft Graph", "OneDrive"], "state": 2, "file_id": 20, "knowledge_revision": 42, "git_revision": "", "ctags": [{"_type": "tag", "name": "ConversationManager", "path": "/home/kavia/workspace/code-generation/patient-health-inquiry-and-note-management-2974-2983/chatbot_backend/api/services.py", "pattern": "/^class ConversationManager:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteGenerator", "path": "/home/kavia/workspace/code-generation/patient-health-inquiry-and-note-management-2974-2983/chatbot_backend/api/services.py", "pattern": "/^class NoteGenerator:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OneDriveClient", "path": "/home/kavia/workspace/code-generation/patient-health-inquiry-and-note-management-2974-2983/chatbot_backend/api/services.py", "pattern": "/^class OneDriveClient:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OneDriveError", "path": "/home/kavia/workspace/code-generation/patient-health-inquiry-and-note-management-2974-2983/chatbot_backend/api/services.py", "pattern": "/^class OneDriveError(Exception):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/patient-health-inquiry-and-note-management-2974-2983/chatbot_backend/api/services.py", "pattern": "/^    def __init__(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "OneDriveClient", "scopeKind": "class"}, {"_type": "tag", "name": "_get_access_token", "path": "/home/kavia/workspace/code-generation/patient-health-inquiry-and-note-management-2974-2983/chatbot_backend/api/services.py", "pattern": "/^    def _get_access_token(self) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self)", "scope": "OneDriveClient", "scopeKind": "class"}, {"_type": "tag", "name": "append_messages", "path": "/home/kavia/workspace/code-generation/patient-health-inquiry-and-note-management-2974-2983/chatbot_backend/api/services.py", "pattern": "/^    def append_messages(self, conversation_id: uuid.UUID, messages: List[Tuple[str, str]]) -> Co/", "language": "Python", "typeref": "typename:Conversation", "kind": "member", "signature": "(self, conversation_id: uuid.UUID, messages: List[Tuple[str, str]])", "scope": "ConversationManager", "scopeKind": "class"}, {"_type": "tag", "name": "generate_note", "path": "/home/kavia/workspace/code-generation/patient-health-inquiry-and-note-management-2974-2983/chatbot_backend/api/services.py", "pattern": "/^    def generate_note(self, conversation: Conversation, note_title: str = \"\") -> Tuple[str, str]/", "language": "Python", "typeref": "typename:Tuple[str,str]", "kind": "member", "signature": "(self, conversation: Conversation, note_title: str = \"\")", "scope": "NoteGenerator", "scopeKind": "class"}, {"_type": "tag", "name": "get_conversation", "path": "/home/kavia/workspace/code-generation/patient-health-inquiry-and-note-management-2974-2983/chatbot_backend/api/services.py", "pattern": "/^    def get_conversation(self, conversation_id: uuid.UUID) -> Conversation:$/", "language": "Python", "typeref": "typename:Conversation", "kind": "member", "signature": "(self, conversation_id: uuid.UUID)", "scope": "ConversationManager", "scopeKind": "class"}, {"_type": "tag", "name": "save_text_file", "path": "/home/kavia/workspace/code-generation/patient-health-inquiry-and-note-management-2974-2983/chatbot_backend/api/services.py", "pattern": "/^    def save_text_file(self, folder_path: str, filename: str, content: str) -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "member", "signature": "(self, folder_path: str, filename: str, content: str)", "scope": "OneDriveClient", "scopeKind": "class"}, {"_type": "tag", "name": "start_conversation", "path": "/home/kavia/workspace/code-generation/patient-health-inquiry-and-note-management-2974-2983/chatbot_backend/api/services.py", "pattern": "/^    def start_conversation(self, patient_id: str, metadata: dict | None = None) -> Conversation:$/", "language": "Python", "typeref": "typename:Conversation", "kind": "member", "signature": "(self, patient_id: str, metadata: dict | None = None)", "scope": "ConversationManager", "scopeKind": "class"}], "hash": "55d44e53d62e270b886726839d714c1f", "format-version": 4, "code-base-name": "chatbot_backend", "filename": "chatbot_backend/api/services.py", "revision_history": [{"42": ""}]}